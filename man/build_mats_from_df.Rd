% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/nasalPkgFunctions.R
\name{build_mats_from_df}
\alias{build_mats_from_df}
\title{Build raw and replicate-mean matrices from a wide data frame}
\usage{
build_mats_from_df(df, sample_cols, base_names)
}
\arguments{
\item{df}{A data frame containing metabolite identifiers and replicate columns.}

\item{sample_cols}{Character vector of replicate column names to extract from
\code{df} (e.g., those returned by \code{get_sample_info()}).}

\item{base_names}{Named character vector mapping replicate column names to
base sample names (prefixes). Names should be replicate column names, and
values are their corresponding base sample IDs.}
}
\value{
A list with:
\itemize{
\item \code{mat_raw}: numeric matrix of metabolites x replicate-columns.
\item \code{mat_mean}: numeric matrix of metabolites x unique base samples
(replicate means).
\item \code{unique_samples}: character vector of unique base sample IDs.
}
}
\description{
Given a data frame containing metabolite rows and replicate sample columns
(e.g., \code{Sample_1}, \code{Sample_2}, ...), this function:
\itemize{
\item determines metabolite row identifiers (rownames or \code{Metabolite} column)
\item extracts replicate columns into a numeric matrix (\code{mat_raw})
\item computes per-sample means across replicates based on provided prefixes
(\code{mat_mean})
}
}
\details{
\strong{Metabolite identifiers}
\itemize{
\item If \code{rownames(df)} are present, they are used.
\item Otherwise, if a \code{Metabolite} column exists, it is used.
\item Missing/empty names are replaced by \code{"NA_metabolite"}.
\item Duplicate metabolite names are made unique via \code{make.unique()}.
}

\strong{Replicate means}
Replicates are grouped by \code{base_names} (prefix). For each unique base
sample, the function computes \code{rowMeans(..., na.rm = TRUE)} across its
replicate columns.
}
\examples{
\dontrun{
df <- data.frame(
  Metabolite = c("M1","M2"),
  A_1 = c(1, 2),
  A_2 = c(3, 4),
  B_1 = c(5, 6)
)
si <- get_sample_info(df)
mats <- build_mats_from_df(df, si$sample_cols, si$base_names)
mats$mat_raw
mats$mat_mean
}

}
