% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/nasalPkgFunctions.R
\name{align_samples_attr}
\alias{align_samples_attr}
\title{Align Metabolomics Feature Table with Metadata Attributes}
\usage{
align_samples_attr(metab_df, metadata_df, sample_col = NULL)
}
\arguments{
\item{metab_df}{A numeric matrix or data frame where columns are samples and
rows are features (e.g., metabolites). Column names must contain sample IDs.}

\item{metadata_df}{A data frame containing sample metadata. Sample IDs must
be available either in a column (see \code{sample_col}) or in row names.}

\item{sample_col}{Optional character string. Name of the column in
\code{metadata_df} containing sample IDs. If \code{NULL} (default), the
function attempts to use a \code{"Sample"} column if present, otherwise
uses row names as sample IDs and creates a \code{"Sample"} column.}
}
\value{
A list with two elements:
\describe{
\item{X}{A numeric matrix containing \code{metab_df} restricted to shared
samples and ordered to match the metadata. Columns are samples.}
\item{meta}{A data frame containing \code{metadata_df} restricted to shared
samples and ordered to match \code{X}. Row names are set to sample IDs.}
}
}
\description{
Aligns the columns (samples) of a metabolomics feature table to a metadata
table and ensures that key attribute columns needed for downstream analyses
are present and correctly typed.
}
\details{
The function identifies a sample ID column in the metadata (or derives it
from row names), intersects sample IDs between the metabolomics table and
metadata, reorders both objects to the same sample order, and optionally
derives missing attributes from the sample ID strings.

The function expects or constructs the following metadata columns:
\itemize{
\item \code{ATTRIBUTE_Cluster}: cluster assignment (factor).
\item \code{ATTRIBUTE_Time}: timepoint information. If missing, it is
derived from the sample ID using the pattern \code{"_T<digits>_"}
(e.g., \code{"SC01_T3_rep1"} gives timepoint \code{3}).
\item \code{ATTRIBUTE_SynCom}: SynCom identifier. If missing, it is derived
as the substring before the first underscore in the sample ID
(e.g., \code{"SC01_T3_rep1"} gives \code{"SC01"}).
}

Only overlapping sample IDs between \code{colnames(metab_df)} and the
metadata sample ID column are retained. The metabolomics matrix is converted
to a numeric matrix and returned alongside the aligned metadata.
}
\examples{
\dontrun{
res <- align_samples_attr(
  metab_df    = metab_mat,
  metadata_df = sample_metadata,
  sample_col  = "Sample"
)

X  <- res$X
md <- res$meta
}

}
